# アニメーションを追加しよう

## 新しいCSSファイルを作成する
今回は、アニメーションを追加するために新しいCSSファイルを作成します。
なぜ新しいCSSファイルを作成するのかというと、アニメーションのスタイルを分けて管理するためです。

CSS（Cascading Style Sheets）は、その名の通り、cascade（滝）のようにスタイルが上から下に適用される仕組みがあります。
この仕組みを利用して、スタイルを分けて管理することで、スタイルの変更や追加がしやすくなります。

また、アニメーションを削除する際も、アニメーションのスタイルを管理するファイルを削除するだけで済むため、綺麗に削除できます。

新しいCSSファイルを作成するには、`profile-card`ディレクトリに`animation.css`というファイルを作成します。
`animation.css`という名前にしたのは、アニメーションのスタイルを管理するファイルであることをわかりやすくするためです。

このように、スタイルを分けて適切な名前を付けることで保守性が向上します。

### ディレクトリ構造
```bash
profile-card
├── animation.css
├── style.css
└── index.html
```

## HTMLファイルからCSSファイルを読み込む
`animation.css`を読み込むために、`index.html`ファイルを編集します。

`<head>`タグ内に`animation.css`を読み込む`<link>`タグを追加します。
`style.css`よりも後に`animation.css`を読み込むことで、`animation.css`で定義したスタイルが優先されます。

順番を逆にすると、`style.css`で定義したスタイルが優先されるため、スタイルが意図通りに表示されませんので注意してください。

```diff
<head>
  <meta charset="UTF-8">
  <title>プロフィール</title>
  <link rel="stylesheet" href="style.css">
+ <link rel="stylesheet" href="animation.css">
</head>
```

## アニメーションを追加する
アニメーションを追加するために、`animation.css`にアニメーションのスタイルを記述します。

通常時はカードがななめに表示され、ホバー（マウスが乗った）時にカードがまっすぐに表示されるようなアニメーションを追加します。

```css
.card {
  transition: all 0.2s;
  transform-origin: 60% 30%;
  transform: perspective(22vh) rotateY(5deg) scaleX(0.8);
  box-shadow: -0.2vh 0.1vh 0.5vh rgba(0, 0, 0, 0.4);
}

.card:hover {
  transform: perspective(22vh) rotateY(0deg) scaleX(1) translate(-1vh, -4vh);
  box-shadow: 0 4vh 2vh rgba(0, 0, 0, 0.2);
}
```

### `.card`要素

`.card`要素は、`style.css`で定義したカードのスタイルを上書きするためのスタイルです。
`style.css`よりも`animation.css`で定義したプロパティが優先され、それ以外のプロパティは`style.css`で定義したスタイルが適用されます。

- `transition: all 0.2s;`：アニメーションの変化を滑らかにするためのプロパティです。`all`は全てのプロパティに対してアニメーションを適用することを意味し、`0.2s`はアニメーションの時間を指定しています。`0`にするとアニメーションがなくなり、`1s`にするとアニメーションの時間が1秒になります。
- `transform-origin: 60% 30%;`：回転の中心を指定します。`60%`は横方向の中心、`30%`は縦方向の中心を指定しています。
- `transform: perspective(22vh) rotateY(5deg) scaleX(0.8);`：カードの初期状態を指定します。`perspective()`関数は、視点の距離を指定して、奥行きを表現します。`rotateY()`関数は、Y軸を中心に回転させるアニメーションを指定します。`scaleX()`関数は、X軸方向に拡大縮小するアニメーションを指定します。
- `box-shadow: -0.2vh 0.1vh 0.5vh rgba(0, 0, 0, 0.4);`：カードに影を付けます。`style.css`でも影を付けていますが、`animation.css`で影の強さを上書きしています。

#### `transform`プロパティ
`transform`プロパティは、要素を変形させるためのプロパティです。
`transform`プロパティには、`rotate()`関数、`scale()`関数、`translate()`関数などがあり、これらを組み合わせることで、要素を自由に変形させることができます。
少し難しいので、詳しくは[MDN Web Docs](https://developer.mozilla.org/ja/docs/Web/CSS/transform)を参照してください。

さて、ここまでが`.card`要素の通常時のスタイルです。
次に、`.card`要素にホバーした際のスタイルを指定します。

### `.card:hover`要素

`.card:hover`要素は、`.card`要素にホバーした際のスタイルを指定します。
`:hover`は、疑似クラスと呼ばれ、要素にマウスが乗った際のスタイルを指定するために使用します。

`.card`要素の`transition`プロパティと併用することで、滑らかなアニメーションを実現します。

```css
.card:hover {
  transform: perspective(22vh) rotateY(0deg) scaleX(1) translate(-1vh, -4vh);
  box-shadow: 0 4vh 2vh rgba(0, 0, 0, 0.2);
}
```

- `transform: perspective(22vh) rotateY(0deg) scaleX(1) translate(-1vh, -4vh);`：ホバー時のカードのスタイルを指定します。`rotateY()`関数の値を`0deg`にすることで、カードがまっすぐに表示されるようになります。`scaleX()`関数の値を`1`にすることで、カードの拡大縮小を解除します。また、`translate()`関数を使用して、カードを指定した位置（左に`1vh`、上に`4vh`）に移動させます。
- `box-shadow: 0 4vh 2vh rgba(0, 0, 0, 0.2);`：ホバー時のカードに影を付けます。非ホバー時の`.card`要素に指定した影をさらに上書きしています。

これで、アニメーションのスタイルが定義できました。
ブラウザで`index.html`を開いて、カードにホバーしてみましょう。

カードがななめに表示され、ホバーした際にまっすぐに表示されることが確認できるはずです。

## さらにひと手間加える

カードがななめになるなら、カードの奥のほうは光の反射で明るく、手前のほうは影で暗くなるといいですよね。
そのために、通常時のカードに影と光の反射を追加します。

アプローチとしては、`.card`要素に黒から白へのグラデーションを重ね合わせて、カードに光の反射を表現します。
以下のスタイルを`animation.css`の下部に追加してください。

```css
.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(to right, rgba(0, 0, 0, 0.2) 20%, rgba(255, 255, 255, 0.2) 80%);
  transition: all 0.2s;
}

.card:hover::before {
  opacity: 0;
}
```

### `.card::before`要素

`.card::before`要素は、`.card`要素の前に要素を追加するための疑似要素です。
疑似要素とは、HTMLには存在しない要素をCSSで生成するための仕組みです。

名前が疑似クラスと似ているため、混同しやすいですが、疑似クラスは要素の状態を指定するためのものであり、疑似要素は要素そのものを生成するためのものです。

`.card::before`要素には、`content`プロパティを指定する必要があります。
`content`プロパティには、空文字列`""`を指定していますが、これは要素にコンテンツ（中身）を追加しないことを意味します。

- `background: linear-gradient(to right, rgba(0, 0, 0, 0.2) 20%, rgba(255, 255, 255, 0.2) 80%);`：カードに影と光の反射を追加します。`linear-gradient()`関数は、グラデーションを指定するための関数です。`to right`は右方向にグラデーションを指定しています。`rgba()`関数は、色と透明度を指定するための関数です。`rgba(0, 0, 0, 0.2)`は黒色の透明度20%、`rgba(255, 255, 255, 0.2)`は白色の透明度20%を指定しています。
- `transition: all 0.2s;`：アニメーションの変化を滑らかにするためのプロパティです。`.card`とまったく同じアニメーションを指定しています。

その他にも、`position`プロパティ、`top`プロパティ、`left`プロパティ、`width`プロパティ、`height`プロパティ、`border-radius`プロパティを指定しています。

これらは、要素の位置、大きさ、形状、背景、アニメーションを指定するためのプロパティです。
`.card`要素と同じ位置、大きさ、形状になるように指定しています。

これにより、カードに光の反射を表現するためのグラデーションが追加されます。

### `.card:hover::before`要素

`.card:hover::before`要素は、`.card::before`要素にホバーした際のスタイルを指定します。

```css
.card:hover::before {
  opacity: 0;
}
```

- `opacity: 0;`：要素の不透明度を表します。ホバー時に、`.card::before`要素を透明にすることで、カードの光の反射が消えるアニメーションとなります。

これで、カードに光の反射を表現するためのスタイルが定義できました。
ブラウザで`index.html`を開いて、カードにホバーしてみましょう。

## お疲れ様でした！
いかがでしたか？
アニメーションを追加することで、カードがななめに表示され、ホバーした際にまっすぐに表示されるようなアニメーションを実装しました。

HTMLやCSSは、少しの工夫で様々な表現ができるため、ぜひ色々なスタイルを試してみてください。
今後はさらに複雑なアニメーションや効果を追加して、より魅力的なプロフィールカードを作ってみるのもいいかもしれません。

オリジナルのWebページを作成する際にも、今回学んだテクニックを活用して、自分だけのスタイルを表現してみてください。
ここまでお付き合いいただき、ありがとうございました！
